let f=a=>{let o=0,n=0,e,r,l,t,d=Promise,m=()=>{o--,--n?u():t=l?.()},u=()=>{if(!e||o>=a)return;o++;let i=e;e=e.e,i.p().then(i.i,i.o).then(m)};return{add:i=>new d((v,P)=>{let s={p:i,i:v,o:P};e?r=r.e=s:r=e=s,n++,u()}),done:()=>n<1?d.resolve():t||(t=new d(i=>l=i)),clear(){e=r=null,n=o},active:()=>o,size:()=>n}};export{f as newQueue};
