let v=l=>{let o=0,n=0,e,d,s,t=async()=>{if(!e||o>=l)return;o++;let i=e;e=e.e;try{i.i(await i.p())}catch(r){i.r(r)}o--,--n?t():s?.()};return{add(i){let r={p:i},a=new Promise((u,m)=>{r.i=u,r.r=m});return e?(d.e=r,d=r):e=d=r,n++,t(),a},done:()=>new Promise(i=>{s=i,n||s()}),clear(){e=d=null,n=o},active:()=>o,size:()=>n}};export{v as newQueue};
