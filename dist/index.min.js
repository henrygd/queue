let f=a=>{let o=0,r=0,e,n,l,t,d=Promise,m=()=>{o--,--r?u():t=l?.()},u=()=>{if(!e||o>=a)return;o++;let i=e;e=e.e,i.p().then(i.i,i.o).then(m)};return{add:i=>new d((v,P)=>{let s={p:i,i:v,o:P};e?n=n.e=s:n=e=s,r++,u()}),done:()=>r?t||(t=new d(i=>l=i)):d.resolve(),clear(){e=n=null,r=o},active:()=>o,size:()=>r}};export{f as newQueue};
